# Chapter 3.4: Locations and ADT (Patient Movement)

*Purpose: Learn how Epic tracks patient movement through facilities, departments, and units using ADT events and location hierarchies.*

---

## The Reality of Patient Movement

Every patient journey through a healthcare facility tells a story. From the moment they walk through the door until they leave, Epic meticulously tracks their physical location and status changes. This chapter explains how Epic's location hierarchy and ADT (Admission, Discharge, Transfer) system work together to create a comprehensive audit trail of patient movement.

For developers new to healthcare, think of ADT as the **event log of patient movement**. Just as you might track user sessions through a web application, healthcare systems track patients through physical and logical locations.

---

### Understanding ADT: The Movement Event Stream

**ADT** stands for Admission, Discharge, Transfer – but in Epic, it encompasses far more than these three events. The `CLARITY_ADT` table captures every significant change in a patient's location, status, or care team during their healthcare journey.

<example-query description="View ADT events with their timestamps and types">
SELECT 
    adt.EVENT_ID,
    adt.PAT_ENC_CSN_ID,
    adt.EVENT_TYPE_C_NAME,
    adt.EFFECTIVE_TIME,
    adt.DEPARTMENT_ID,
    pe.CONTACT_DATE
FROM CLARITY_ADT adt
JOIN pat_enc pe ON adt.PAT_ENC_CSN_ID = pe.PAT_ENC_CSN_ID
ORDER BY adt.EFFECTIVE_TIME;
</example-query>

**Key ADT Event Types** include:
- **Admission**: Patient formally admitted to facility
- **Discharge**: Patient leaves the facility
- **Transfer In/Out**: Movement between units
- **Hospital Outpatient**: Outpatient registration
- **Patient Update**: Status or demographic changes
- **Census**: Midnight census snapshots
- **Leave of Absence**: Temporary departures

The power of ADT lies in its **temporal precision**. Each event captures not just what happened, but exactly when, creating a complete timeline of the patient's journey.

---

### Epic's Location Hierarchy

Epic organizes physical and logical spaces in a three-tier hierarchy that mirrors how healthcare facilities actually operate:

```
CLARITY_LOC (Facilities/Service Areas)
    └── CLARITY_DEP (Departments)
            └── Rooms
                └── Beds
```

This structure serves dual purposes: **operational workflow** and **financial attribution**.

<example-query description="Explore the location hierarchy in our data">
SELECT 
    l.LOC_ID,
    l.LOC_NAME_ as location_name,
    d.DEPARTMENT_ID,
    d.DEPARTMENT_NAME
FROM CLARITY_LOC l
JOIN CLARITY_DEP d ON 1=1  -- Cross join to show all combinations
ORDER BY l.LOC_NAME_, d.DEPARTMENT_NAME;
</example-query>

**CLARITY_LOC** represents the highest level – entire facilities or service areas. In our sample data, we see facilities like "UPH MERITER HOSPITAL" and service areas like "CLN MAC ASSOCIATED PHYSICIANS LLP".

**CLARITY_DEP** contains the actual departments where care is delivered. These range from clinical units ("MAC APL INTERNAL MEDICINE") to support services ("CENTRAL BILLING OFFICE").

---

### Physical vs. Logical Locations

One of Epic's key design decisions is supporting both **physical** and **logical** locations. Understanding this distinction is crucial for accurate reporting.

**Physical Locations** represent actual places:
- Emergency Department Bay 3
- ICU Room 204, Bed A
- Radiology Suite 2

**Logical Locations** represent organizational concepts:
- Cardiology Service
- Telemedicine
- Home Health

<example-query description="See how encounters link to departments">
SELECT 
    pe.PAT_ENC_CSN_ID,
    pe.CONTACT_DATE,
    pe.DEPARTMENT_ID,
    d.DEPARTMENT_NAME,
    pe.HOSP_ADMSN_TYPE_C_NAME as admission_type
FROM pat_enc pe
LEFT JOIN CLARITY_DEP d ON pe.DEPARTMENT_ID = d.DEPARTMENT_ID
WHERE pe.DEPARTMENT_ID IS NOT NULL
ORDER BY pe.CONTACT_DATE DESC
LIMIT 10;
</example-query>

The encounter's `DEPARTMENT_ID` might be physical (where the patient physically was) or logical (which service treated them), depending on your organization's configuration.

---

### Tracking Room and Bed Assignments

While the core location hierarchy provides the framework, actual room and bed assignments live in the ADT events themselves. This design allows Epic to maintain a complete history of every bed the patient occupied.

<example-query description="Check for room and bed assignments in ADT events">
SELECT 
    EVENT_ID,
    PAT_ENC_CSN_ID,
    EVENT_TYPE_C_NAME,
    EFFECTIVE_TIME,
    ROOM_ID,
    BED_ID,
    BED_ID_BED_LABEL
FROM CLARITY_ADT
WHERE EVENT_TYPE_C_NAME = 'Hospital Outpatient'
ORDER BY EFFECTIVE_TIME;
</example-query>

In production systems, you'd see detailed room and bed information. The empty values in our sample data reflect the outpatient nature of these encounters – outpatients typically don't have assigned beds.

---

### The Patient's Primary Location

Beyond tracking where patients go during encounters, Epic maintains each patient's **primary location** – essentially their "home" clinic or facility. This drives many operational decisions, from scheduling to population health management.

<example-query description="View patient primary location assignments">
SELECT 
    p.PAT_ID,
    p.LOC_ID,
    l.LOC_NAME_ as primary_location,
    p.EFF_DATE as effective_date,
    p.TERM_DATE as termination_date
FROM PAT_PRIM_LOC p
LEFT JOIN CLARITY_LOC l ON p.LOC_ID = l.LOC_ID
ORDER BY p.EFF_DATE;
</example-query>

The `PAT_PRIM_LOC` table maintains a full history, allowing you to track when patients change primary care clinics or move between service areas.

---

### Service Areas: The Operational Grouping

Service areas deserve special attention because they often drive:
- **Billing rules** (different areas may have different fee schedules)
- **Reporting boundaries** (separate reports for each service area)
- **Security access** (users may only see their service area's data)

<example-query description="Count encounters by location to understand volume">
SELECT 
    pe.PRIMARY_LOC_ID,
    l.LOC_NAME_,
    COUNT(*) as encounter_count,
    COUNT(DISTINCT pe.PAT_ID) as unique_patients
FROM pat_enc pe
LEFT JOIN CLARITY_LOC l ON pe.PRIMARY_LOC_ID = l.LOC_ID
WHERE pe.PRIMARY_LOC_ID IS NOT NULL
GROUP BY pe.PRIMARY_LOC_ID, l.LOC_NAME_;
</example-query>

---

### ADT Event Sequencing

ADT events tell a story, but only if you read them in the right order. The `EFFECTIVE_TIME` field provides precise sequencing, essential for understanding the patient's path through the facility.

<example-query description="Trace a patient's movement through ADT events">
WITH patient_journey AS (
    SELECT 
        adt.EVENT_ID,
        adt.EVENT_TYPE_C_NAME as event_type,
        adt.EFFECTIVE_TIME,
        adt.DEPARTMENT_ID,
        d.DEPARTMENT_NAME,
        -- Calculate time since admission
        JULIANDAY(adt.EFFECTIVE_TIME) - 
        FIRST_VALUE(JULIANDAY(adt.EFFECTIVE_TIME)) 
            OVER (PARTITION BY adt.PAT_ENC_CSN_ID 
                  ORDER BY adt.EFFECTIVE_TIME) as days_since_start
    FROM CLARITY_ADT adt
    LEFT JOIN CLARITY_DEP d ON adt.DEPARTMENT_ID = d.DEPARTMENT_ID
    WHERE adt.PAT_ENC_CSN_ID = '922942674'
)
SELECT * FROM patient_journey
ORDER BY EFFECTIVE_TIME;
</example-query>

Notice how the "Hospital Outpatient" event occurs hours before the "Discharge" event. This reflects the reality of outpatient procedures – the patient registers, receives treatment, and is discharged the same day.

---

### Common ADT Patterns

Through analyzing ADT data, several patterns emerge that reflect real-world healthcare operations:

**1. Midnight Discharges**
Our sample data shows discharges at exactly 11:59 PM – a common pattern for financial reasons. Many insurance contracts calculate payment based on midnight census.

**2. Registration Before Admission**
Patients often appear in the system before their official admission time, reflected in "Pre-Admission" or registration events.

**3. Transfer Chains**
Complex patient journeys might show: ED → ICU → Step-down unit → Medical floor → Discharge

<example-query description="Analyze time between ADT events">
SELECT 
    EVENT_TYPE_C_NAME,
    COUNT(*) as event_count,
    AVG(
        JULIANDAY(EFFECTIVE_TIME) - JULIANDAY('00:00:00')
    ) * 24 as avg_hour_of_day
FROM CLARITY_ADT
GROUP BY EVENT_TYPE_C_NAME
ORDER BY event_count DESC;
</example-query>

---

### Integration with Clinical Data

The true power of location and ADT data emerges when integrated with clinical information. Every order, result, and note can be traced to where the patient was when it occurred.

<example-query description="Link clinical encounters to their departments">
SELECT 
    pe.PAT_ENC_CSN_ID,
    pe.CONTACT_DATE,
    d.DEPARTMENT_NAME,
    COUNT(DISTINCT dx.LINE) as diagnosis_count
FROM pat_enc pe
LEFT JOIN CLARITY_DEP d ON pe.DEPARTMENT_ID = d.DEPARTMENT_ID
LEFT JOIN pat_enc_dx dx ON pe.PAT_ENC_CSN_ID = dx.PAT_ENC_CSN_ID
WHERE d.DEPARTMENT_NAME IS NOT NULL
GROUP BY pe.PAT_ENC_CSN_ID, pe.CONTACT_DATE, d.DEPARTMENT_NAME
ORDER BY pe.CONTACT_DATE DESC
LIMIT 10;
</example-query>

This integration enables powerful analytics:
- **Department utilization** rates
- **Length of stay** by unit
- **Patient flow** bottlenecks
- **Infection control** tracking

---

### Location-Based Reporting Challenges

Working with Epic's location data presents several challenges:

**1. Logical vs. Physical Ambiguity**
Without additional context, you can't always determine if a department represents a physical location or a service line.

**2. Historical Accuracy**
Departments and locations can be renamed, merged, or inactivated. The EHI export typically shows current names, potentially masking historical changes.

**3. Missing Hierarchies**
The relationship between locations and departments isn't always explicitly stored. You may need to infer relationships from encounter patterns.

**4. Sparse Bed Data**
As seen in our sample, bed-level detail may be missing for certain encounter types or may not be included in the export.

---

### Best Practices for Location Analysis

When working with Epic's location and ADT data:

**1. Always Consider Time**
- Location assignments can change mid-encounter
- Departments can relocate or close
- Service areas can be reorganized

**2. Validate Location Types**
Before aggregating by location, understand what each location represents. A "department" could be:
- A physical unit (3rd floor medical ward)
- A clinical service (hospitalist service)
- An administrative grouping (all cardiology locations)

**3. Handle Null Locations Gracefully**
<example-query description="Check for encounters with missing location data">
SELECT 
    COUNT(*) as total_encounters,
    COUNT(DEPARTMENT_ID) as with_department,
    COUNT(PRIMARY_LOC_ID) as with_primary_loc,
    ROUND(
        100.0 * COUNT(DEPARTMENT_ID) / COUNT(*), 2
    ) as pct_with_department
FROM pat_enc;
</example-query>

**4. Use ADT for Precise Tracking**
When you need exact patient location at a specific time, ADT events provide more precision than encounter-level department assignments.

---

### Key Takeaways

1. **ADT events** create a temporal log of every patient movement and status change
2. **Location hierarchy** (LOC → DEP → Room → Bed) mirrors healthcare facility organization  
3. **Physical vs. logical** locations serve different purposes – know which you're analyzing
4. **Service areas** drive operational boundaries for billing, reporting, and security
5. **Primary locations** establish the patient's "home" facility for ongoing care
6. **Integration patterns** between ADT, encounters, and clinical data enable powerful analytics
7. **Time precision** in ADT events allows reconstruction of exact patient journeys
8. **Data sparseness** is common – not all location levels are populated for all encounters

The location and ADT infrastructure forms the **spatial and temporal backbone** of Epic's data model. Every clinical event happens somewhere and somewhen – these tables tell you exactly where and when.