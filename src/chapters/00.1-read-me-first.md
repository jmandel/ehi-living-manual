# Chapter 0.1: Read Me First

*This chapter sets the stage for anyone holding an Epic EHI export, explaining what you're looking at, why it exists, and how this manual will help you master it.*

### The Folder of Files

You've been handed an Epic EHI (Electronic Health Information) export. Maybe it's a handful of files for your own health data, or thousands of files totaling gigabytes for an entire health system. Either way, you're looking at cryptic file names like `PAT_ENC.tsv`, `HSP_ACCOUNT.tsv`, and wondering where to even begin.

**Your Challenge:** Navigate 18,000+ potential tables with minimal initial documentation.  
**Your Goal:** Transform this raw data into a coherent, queryable, and ultimately actionable resource.

This manual provides the map and compass for that journey.

### Who You Are

This manual is for:
- An **individual** with your own health data from a patient portal
- A **developer** new to healthcare data, building a proof-of-concept
- A **data engineer** or **analyst** tasked with integrating a large-scale Epic export
- Anyone who has received a folder of TSV files and needs to make sense of them

The fundamental challenge is the same regardless of scale: understanding the structure and relationships within Epic's complex data model.

### What This Manual Is

**A Practical Guide**: We take a pattern-oriented approach to understanding Epic data. Instead of memorizing thousands of tables, you'll learn the core patterns that apply everywhere.

**Focus on the "Why"**: We don't just show you *what* the data is; we explain *why* it's structured that way. Understanding that Epic uses tabs instead of commas because clinical notes contain phrases like "fever, chills, and fatigue" helps you appreciate the design decisions.

**A Self-Contained Learning Environment**: This entire manual is interactive. You can run SQL queries on a built-in sample dataset directly in your browser:

<example-query description="Count the total number of patient encounters in the sample data">
-- Every patient visit, phone call, or hospital stay creates an encounter
SELECT COUNT(*) as total_encounters
FROM PAT_ENC;
</example-query>

**A Complementary Resource**: This guide provides the context and patterns that official Epic documentation often lacks. Use them together for best results.

### What This Manual Is Not

**Not a Replacement** for Epic's official EHI table/column documentation. You'll still need the data dictionary for definitive field-level details.

**Not About Export Generation**: We assume you already have the data files or are using our sample data.

**Not Epic-Version Specific**: The core patterns apply across recent Epic versions, though specific table or column names may vary slightly.

### Understanding the Three-Layer Architecture

Your data comes from a sophisticated three-tier system that shapes everything about its structure:

1. **Chronicles**: Epic's real-time clinical database (hierarchical, optimized for patient care)
2. **Clarity**: The reporting database (relational SQL, updated nightly from Chronicles)  
3. **EHI Export**: Your point-in-time extract from Clarity (TSV files)

<example-query description="Understanding the data lag - your export is always historical">
-- The nightly ETL process means data is always 1+ days behind
-- This sample dataset demonstrates the concept with older data
SELECT 
  MAX(CONTACT_DATE) as latest_encounter_in_export,
  date('now') as today,
  'EHI exports are point-in-time snapshots, not real-time data' as key_point
FROM PAT_ENC
WHERE CONTACT_DATE IS NOT NULL;
</example-query>

This architecture exists for good reasons:
- **Performance**: Complex analytics can't run on the live clinical system
- **Structure**: Hierarchical databases are great for workflows, terrible for SQL joins
- **Standards**: The healthcare world expects SQL-compatible data

### Your Interactive Environment

This manual *is* your development environment. There's nothing to install or configure.

**Live Code Blocks**: Every SQL example is runnable. Click "Run" to execute queries against our sample dataset.

**Instant Results**: Query results appear directly below the code block.

**Powered by You**: Everything runs locally in your browser using WebAssembly. The sample data never leaves your computer.

<example-query description="Explore the sample patient's encounters with diagnoses">
-- Join encounters with their diagnoses to see the full picture
SELECT 
  pe.PAT_ENC_CSN_ID,
  pe.CONTACT_DATE,
  COUNT(pd.DX_ID) as diagnosis_count,
  GROUP_CONCAT(
    CASE 
      WHEN pd.PRIMARY_DX_YN = 'Y' 
      THEN '[PRIMARY] ' || COALESCE(edg.DX_NAME, 'DX #' || pd.DX_ID)
      ELSE COALESCE(edg.DX_NAME, 'DX #' || pd.DX_ID)
    END, 
    '; '
  ) as diagnoses
FROM PAT_ENC pe
LEFT JOIN PAT_ENC_DX pd ON pe.PAT_ENC_CSN_ID = pd.PAT_ENC_CSN_ID
LEFT JOIN CLARITY_EDG edg ON pd.DX_ID = edg.DX_ID
WHERE pd.DX_ID IS NOT NULL
GROUP BY pe.PAT_ENC_CSN_ID, pe.CONTACT_DATE
ORDER BY pe.CONTACT_DATE DESC
LIMIT 10;
</example-query>

**Want to work offline or with your own tools?**  
Download the complete SQLite database file we use in these examples. Perfect for exploring with tools like DB Browser for SQLite, DBeaver, or Python.

[↓ Download ehi.sqlite (25MB)](placeholder-for-download-link)

### How to Use This Manual

**Read and Run**: Read the explanations, then immediately run the example queries. Experiment by modifying the SQL.

**Sequential Learning**: Parts 0-2 build a critical foundation and should be read in order.

**Reference Sections**: Parts 3-6 cover specific data domains (clinical, billing, etc.) and can be accessed as needed.

**Focus on Patterns**: Don't memorize table names. Understand how encounters link everything, how master files work, and how data is categorized.

### Emergency Quick Reference

If you need to solve a specific problem RIGHT NOW:
- **Find a patient's encounters**: See Chapter 3.1 for `PAT_ENC` patterns
- **Link clinical visits to charges**: Chapter 2.2 explains the CSN connections
- **Understand a charge**: Chapter 4.2 deconstructs billing buckets
- **Parse the TSV files**: Chapter 5.1 covers Epic's tab-separated format

<example-query description="Quick check: How many tables are in your export?">
-- Each TSV file becomes a table in your database
SELECT COUNT(*) as total_tables
FROM sqlite_master 
WHERE type = 'table';
</example-query>

### Common patterns you'll encounter:
- **One-day lag**: Yesterday's data at best
- **Missing vs NULL vs Zero**: Each means something different
- **Orphaned records**: Relationships that don't quite connect
- **TSV format**: Tabs instead of commas (for good reasons)

### Prerequisites Check

Before proceeding, ensure you have:
- [ ] Access to an Epic EHI export, **or** you're ready to use our built-in sample data
- [ ] Basic understanding of SQL (SELECT, FROM, JOIN, WHERE)
- [ ] Patience and curiosity for learning healthcare data patterns

### A Note on Privacy

The sample data in this manual is a redacted version of a real EHI export made public for educational purposes. When working with real patient data, always follow HIPAA guidelines and your organization's privacy policies.

---

### Key Takeaways

- Epic EHI exports are complex but conquerable with the right patterns
- Your data flows from Chronicles → Clarity → EHI Export with a 1+ day lag
- This manual provides hands-on learning with real queries you can run
- Focus on understanding patterns, not memorizing thousands of tables
- The interactive environment lets you learn by doing, not just reading

→ **Next**: [Chapter 0.2: Five-Minute Test-Drive](./00.2-five-minute-test-drive.md) - See immediate results with your first queries
