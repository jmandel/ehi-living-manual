# Chapter 0.1: Read Me First

*Purpose: To set the stage for anyone holding an Epic EHI export and provide immediate clarity on how this manual will transform your understanding of this complex dataset.*

## Who You Are

You've been handed an Epic EHI (Electronic Health Information) export. It might be:
- **Your own health data** downloaded from a patient portal
- **A handful of files** for a single patient proof-of-concept
- **Thousands of TSV files** for an entire population
- **Gigabytes of data** with minimal documentation

You're looking at cryptic file names like `PAT_ENC.tsv`, `HSP_ACCOUNT_3.tsv`, and `CLARITY_SER.tsv`, wondering where to even begin.

**Your Challenge:** Navigate 18,000+ potential tables with minimal initial documentation.  
**Your Goal:** Transform this raw data into a coherent, queryable, and ultimately actionable resource.

This manual provides the map and compass for that journey.

## What This Manual Is

### A Practical Guide
We take a pattern-oriented approach to understanding Epic data. Instead of memorizing thousands of table names, you'll learn the fundamental patterns that apply at any scale:
- How **encounters** link everything together
- Why **LINE numbers** appear everywhere
- What **master files** mean and how to use them
- How clinical and financial data interconnect

### Focus on the "Why"
We don't just show you *what* the data is; we explain *why* it's structured that way. Understanding Epic's **Chronicles → Clarity → EHI** architecture explains patterns like:
- Why your data is always at least one day old
- Why there are so many tables for seemingly simple concepts
- Why composite keys use `(ID, LINE)` patterns
- Why TSV format instead of CSV

### A Self-Contained Learning Environment
This entire manual is interactive. You can run SQL queries on a built-in sample dataset directly in your browser:

<example-query description="See what the PAT_ENC table structure looks like">
-- The patient encounter table: your central hub
SELECT 
  PAT_ENC_CSN_ID,
  CONTACT_DATE,
  ENC_TYPE_C_NAME,
  DEPARTMENT_ID
FROM PAT_ENC
LIMIT 5;
</example-query>

### A Complementary Resource
This guide gives you the context and patterns that official Epic documentation often lacks. Use them together:
- **Epic docs**: Field-by-field specifications
- **This manual**: The bigger picture and practical patterns

## What This Manual Is Not

- **Not a Replacement** for Epic's official table/column documentation
- **Not About Export Generation** - we assume you already have the files
- **Not Epic-Version Specific** - core patterns apply across versions
- **Not About Real-Time Systems** - EHI exports are historical snapshots

## Why Epic EHI Exports Matter

The 21st Century Cures Act established that **patients own their health data**. This means:
- Patients have the right to export their complete electronic health information
- Healthcare providers cannot block access to this data
- The data must be provided in a usable electronic format

Epic's EHI export is their implementation of this mandate, providing access to the full depth of data stored in their systems.

## Zero-Setup: Your Interactive Environment

**Nothing to install.** When you loaded this page:
1. Your browser downloaded a small SQLite database with Epic table schemas
2. Loaded it into memory using WebAssembly
3. Prepared an interactive SQL interface

Everything runs locally in your browser - no servers, no setup, no risk.

<example-query description="Count the total number of tables in an Epic export">
-- Epic exports can contain thousands of tables
SELECT COUNT(*) as table_count 
FROM sqlite_master 
WHERE type = 'table' 
  AND name NOT LIKE 'sqlite_%';
</example-query>

**Want to work offline?** Download the complete SQLite database:  
[↓ Download ehi.sqlite (Schema Reference)](placeholder-for-download-link)

## The Core Architecture You Must Understand

Epic uses a three-tier architecture that fundamentally shapes your data:

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   Chronicles    │     │     Clarity     │     │   EHI Export    │
│  (Real-time)    │ ETL │  (Reporting DB) │     │  (Your Files)   │
│   Hierarchical  │ ──> │   Relational    │ ──> │      TSV        │
└─────────────────┘     └─────────────────┘     └─────────────────┘
    Used by                 Updated              Point-in-time
    Clinicians              Nightly              Snapshot
```

**Key Insight:** Your EHI export comes from Clarity, not the real-time system. This explains the one-day lag and the relational structure.

## How to Use This Manual

### For Immediate Problems
Jump directly to these chapters:
- **Find a patient's encounters** → Chapter 3.1
- **Link visits to charges** → Chapter 2.2
- **Parse TSV files correctly** → Chapter 5.1
- **Understand a bill** → Chapter 4.2

### For Deep Understanding
Read Parts 0-2 sequentially to build a foundation, then explore specific domains:
1. **Part 0**: Orientation (this section)
2. **Part 1**: Core Architecture
3. **Part 2**: Fundamental Patterns
4. **Parts 3-6**: Domain-specific deep dives

### Learn by Doing
Every concept includes runnable SQL. Experiment freely - you can't break anything:

<example-query description="Explore how Epic uses category codes">
-- Epic uses _C suffix for category codes
-- and _C_NAME for display values
SELECT 
  'APPT_STATUS_C' as code_column,
  'APPT_STATUS_C_NAME' as name_column,
  'Appointment status (Scheduled, Completed, Canceled)' as usage
UNION ALL
SELECT 
  'ENC_TYPE_C',
  'ENC_TYPE_C_NAME', 
  'Type of encounter (Office Visit, Telephone, Hospital)'
UNION ALL
SELECT 
  'FIN_CLASS_C',
  'FIN_CLASS_C_NAME',
  'Financial class of visit';
</example-query>

## Emergency Quick Reference

### The Most Important Table
**`PAT_ENC`** (Patient Encounters) is your rosetta stone. Nearly everything links through `PAT_ENC_CSN_ID`:

<example-query description="Understanding the central role of PAT_ENC_CSN_ID">
-- CSN = Contact Serial Number
-- This ID links encounters to everything else
SELECT 
  'PAT_ENC_DX' as table_name,
  'Diagnoses' as contains,
  'PAT_ENC_CSN_ID' as links_via
UNION ALL
SELECT 'ORDER_PROC', 'Orders/Labs', 'PAT_ENC_CSN_ID'
UNION ALL  
SELECT 'HSP_ACCOUNT', 'Hospital Bills', 'PAT_ENC_CSN_ID'
UNION ALL
SELECT 'IP_FLWSHT_REC', 'Flowsheet Data', 'PAT_ENC_CSN_ID';
</example-query>

### File Format Essentials
- **Format**: Tab-separated values (TSV)
- **Encoding**: UTF-8
- **Headers**: First row always
- **Nulls**: Empty string, not "NULL"
- **Escaping**: Backslash (\\t, \\n, \\\\)

### Pattern Recognition
```
PAT_*     → Patient-related tables
HSP_*     → Hospital billing  
ARPB_*    → Professional billing
ORDER_*   → Clinical orders
CLARITY_* → Reference/provider data
*_HX      → History/audit tables
```

## Prerequisites Check

Before proceeding, confirm:
- ✓ You have Epic EHI export files **OR** will use our examples
- ✓ You understand basic SQL (SELECT, JOIN, WHERE)
- ✓ You're ready for a learning curve - this is complex data
- ✓ You have patience - Epic's design has reasons we'll uncover

## What Success Looks Like

By the end of this manual, you'll be able to:
1. Navigate the file structure confidently
2. Write queries that properly join related data
3. Understand why the data looks the way it does
4. Build accurate reports and analyses
5. Avoid common pitfalls that trap newcomers

## A Personal Note

Epic's data model can feel overwhelming. Tables reference other tables that reference other tables. IDs don't always mean what you think. Dates might be stored as decimals. Some "obvious" joins don't work.

**This is normal.** Epic's structure evolved over 40+ years to support complex healthcare workflows. The patterns make sense once you understand the clinical and financial processes that created them.

Be patient with yourself. Every Epic analyst has been where you are now.

## Ready?

You're about to gain hard-won knowledge that typically takes months or years to acquire. This manual distills patterns discovered through analyzing thousands of Epic implementations.

Your data awaits. Let's begin.

---

→ **Next Steps:** Continue to [Chapter 0.2: Five-Minute Test-Drive](./00.2-five-minute-test-drive.md)