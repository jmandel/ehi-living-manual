[
  {
    "id": "00.1-read-me-first-0",
    "originalQuery": "-- Every patient visit, phone call, or hospital stay creates an encounter\nSELECT COUNT(*) as total_encounters\nFROM PAT_ENC;",
    "description": "Count the total number of patient encounters in the sample data",
    "chapterId": "00.1-read-me-first",
    "index": 0,
    "results": [
      {
        "total_encounters": 111
      }
    ],
    "columns": [
      "total_encounters"
    ],
    "error": null
  },
  {
    "id": "00.1-read-me-first-1",
    "originalQuery": "-- The nightly ETL process means data is always 1+ days behind\n-- This sample dataset demonstrates the concept with older data\nSELECT \n  MAX(CONTACT_DATE) as latest_encounter_in_export,\n  date('now') as today,\n  'EHI exports are point-in-time snapshots, not real-time data' as key_point\nFROM PAT_ENC\nWHERE CONTACT_DATE IS NOT NULL;",
    "description": "Understanding the data lag - your export is always historical",
    "chapterId": "00.1-read-me-first",
    "index": 1,
    "results": [
      {
        "latest_encounter_in_export": "9/8/2020 12:00:00 AM",
        "today": "2025-06-27",
        "key_point": "EHI exports are point-in-time snapshots, not real-time data"
      }
    ],
    "columns": [
      "latest_encounter_in_export",
      "today",
      "key_point"
    ],
    "error": null
  },
  {
    "id": "00.1-read-me-first-2",
    "originalQuery": "-- Join encounters with their diagnoses to see the full picture\nSELECT \n  pe.PAT_ENC_CSN_ID,\n  pe.CONTACT_DATE,\n  COUNT(pd.DX_ID) as diagnosis_count,\n  GROUP_CONCAT(\n    CASE \n      WHEN pd.PRIMARY_DX_YN = 'Y' \n      THEN '[PRIMARY] ' || COALESCE(edg.DX_NAME, 'DX #' || pd.DX_ID)\n      ELSE COALESCE(edg.DX_NAME, 'DX #' || pd.DX_ID)\n    END, \n    '; '\n  ) as diagnoses\nFROM PAT_ENC pe\nLEFT JOIN PAT_ENC_DX pd ON pe.PAT_ENC_CSN_ID = pd.PAT_ENC_CSN_ID\nLEFT JOIN CLARITY_EDG edg ON pd.DX_ID = edg.DX_ID\nWHERE pd.DX_ID IS NOT NULL\nGROUP BY pe.PAT_ENC_CSN_ID, pe.CONTACT_DATE\nORDER BY pe.CONTACT_DATE DESC\nLIMIT 10;",
    "description": "Explore the sample patient's encounters with diagnoses",
    "chapterId": "00.1-read-me-first",
    "index": 2,
    "results": [
      {
        "PAT_ENC_CSN_ID": 991225117,
        "CONTACT_DATE": "9/28/2023 12:00:00 AM",
        "diagnosis_count": 4,
        "diagnoses": "Screening for diabetes mellitus; Screening for hyperlipidemia; [PRIMARY] Preventative health care; Post concussion syndrome"
      },
      {
        "PAT_ENC_CSN_ID": 1028743701,
        "CONTACT_DATE": "9/28/2023 12:00:00 AM",
        "diagnosis_count": 3,
        "diagnoses": "Screening for diabetes mellitus; Screening for hyperlipidemia; Preventative health care"
      },
      {
        "PAT_ENC_CSN_ID": 720803470,
        "CONTACT_DATE": "8/9/2018 12:00:00 AM",
        "diagnosis_count": 3,
        "diagnoses": "Dyspepsia; [PRIMARY] Encounter to establish care; Gastroesophageal reflux disease, esophagitis presence not specified"
      },
      {
        "PAT_ENC_CSN_ID": 724628999,
        "CONTACT_DATE": "8/9/2018 12:00:00 AM",
        "diagnosis_count": 1,
        "diagnoses": "Encounter to establish care"
      },
      {
        "PAT_ENC_CSN_ID": 948004323,
        "CONTACT_DATE": "8/29/2022 12:00:00 AM",
        "diagnosis_count": 3,
        "diagnoses": "Primary hypertension; [PRIMARY] Preventative health care; Post concussion syndrome"
      },
      {
        "PAT_ENC_CSN_ID": 958147754,
        "CONTACT_DATE": "8/29/2022 12:00:00 AM",
        "diagnosis_count": 1,
        "diagnoses": "Primary hypertension"
      },
      {
        "PAT_ENC_CSN_ID": 725327197,
        "CONTACT_DATE": "8/18/2018 12:00:00 AM",
        "diagnosis_count": 2,
        "diagnoses": "Dyspepsia; Gastroesophageal reflux disease, esophagitis presence not specified"
      },
      {
        "PAT_ENC_CSN_ID": 832464108,
        "CONTACT_DATE": "7/31/2020 12:00:00 AM",
        "diagnosis_count": 1,
        "diagnoses": "Traumatic injury of head, initial encounter"
      },
      {
        "PAT_ENC_CSN_ID": 829995922,
        "CONTACT_DATE": "7/21/2020 12:00:00 AM",
        "diagnosis_count": 1,
        "diagnoses": "[PRIMARY] Traumatic injury of head, initial encounter"
      },
      {
        "PAT_ENC_CSN_ID": 829467718,
        "CONTACT_DATE": "7/16/2020 12:00:00 AM",
        "diagnosis_count": 1,
        "diagnoses": "[PRIMARY] Traumatic injury of head, initial encounter"
      }
    ],
    "columns": [
      "PAT_ENC_CSN_ID",
      "CONTACT_DATE",
      "diagnosis_count",
      "diagnoses"
    ],
    "error": null
  },
  {
    "id": "00.1-read-me-first-3",
    "originalQuery": "-- Each TSV file becomes a table in your database\nSELECT COUNT(*) as total_tables\nFROM sqlite_master \nWHERE type = 'table';",
    "description": "Quick check: How many tables are in your export?",
    "chapterId": "00.1-read-me-first",
    "index": 3,
    "results": [
      {
        "total_tables": 551
      }
    ],
    "columns": [
      "total_tables"
    ],
    "error": null
  }
]